<!--
  templateType: blog_listing
  isAvailableForNewContent: true
  label:  Blogs listing
-->
{% extends "./layouts/base.html" %} {% block body %} {# The main-content ID is
  used for the navigation skipper in the header.html file. More information on the
  navigation skipper can be found here:
  https://github.com/HubSpot/cms-theme-boilerplate/wiki/Accessibility #}

<main id="main-content" class="body-container-wrapper">

  <section class="blog-listing">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <h1 class="blog-listing__header h2">Blogs Listing</h1>
        </div>
      </div>
    </div>
  </section>



  <!--- LATEST ARTICLES --->
  <section class="latest-articles">
    <div class="container">

      {% for content in contents %}
        <!--- ARTICLE --->
        <a href="{{ content.absolute_url }}" class="latest-articles__article">
          <div class="row">
            <div class="col-12 col-md-4">
              <div class="latest-articles__article-image">
                <img src="{{ content.featured_image }}" alt="Blog">
              </div>
            </div>
            <div class="d-none d-md-block col-1"></div>
            <div class="col-12 col-md-7">
              <div class="latest-articles__article-info">
                {% set splitDate = content.publish_date_localized|split(' ', 4) %}
                <div class="latest-articles__article-date eyebrow2">{{splitDate[0]}} {{splitDate[1]}} {{splitDate[2]}}</div>
                <div class="latest-articles__article-title p1">{{ content.name }}</div>
                <div class="latest-articles__article-description p2">{{ content.meta_description }}</div>
                <div class="latest-articles__article-read eyebrow3">{{ content.post_body|wordcount|divide(300) }} minute read</div>
              </div>
            </div>
          </div>
        </a>
        <!--- ARTICLE --->
      {% endfor %}
     
    </div>
  </section>


  <div class="container">
    <div class="blog-pagination">
        {% set page_list = [-2, -1, 0, 1, 2] %}
        {% if contents.total_page_count - current_page_num == 1 %}{% set offset = -1 %}
        {% elif contents.total_page_count - current_page_num == 0 %}{% set offset = -2 %}
        {% elif current_page_num == 2 %}{% set offset = 1 %}
        {% elif current_page_num == 1 %}{% set offset = 2 %}
        {% else %}{% set offset = 0 %}{% endif %}

        <div class="blog-pagination__container blog-pagination__left">
            {% if last_page_num %}<a class="prev-link" href="{{ blog_page_link(last_page_num) }}">❮</a>{% endif %}
            {% if contents.total_page_count > 5 %}
                {% if current_page_num >= 4 %}
                    <a href="{{ blog_page_link(1) }}">1</a>
                    <a class="elipses" href="{% if current_page_num <= 5 %}{{ blog_page_link(1) }}{% else %}{{ blog_page_link(current_page_num - 5) }}{% endif %}">...</a>
                {% endif %}
            {% endif %}
        </div>
        <div class="blog-pagination__container blog-pagination__center">
            {% for page in page_list %}
                {% set this_page = current_page_num + page + offset %}
                {% if this_page > 0 and this_page <= contents.total_page_count %}
                    <a {% if this_page == current_page_num %}class="active"{% endif %} href="{{ blog_page_link(this_page) }}">{{ this_page }}</a>
                {% endif %}
            {% endfor %}
        </div>
        <div class="blog-pagination__container blog-pagination__right">
            {% if contents.total_page_count > 5 %}
                {% if contents.total_page_count - current_page_num > 2 %}
                    <a class="elipses" href="{% if contents.total_page_count - current_page_num <= 5 %}{{ contents.total_page_count }}{% else %}{{ blog_page_link(current_page_num + 5) }}{% endif %}">...</a>
                    <a href="{{ blog_page_link(contents.total_page_count) }}">{{ contents.total_page_count }}</a>
                {% endif %}
            {% endif %}
            {% if next_page_num %}<a class="next-link" href="{{ blog_page_link(current_page_num + 1) }}">❯</a>{% endif %}
        </div>
    </div>
  </div>

</main>
{% endblock body %}